var citySelector = {};

citySelector.pc = new Array();

citySelector.pc[0] = new Array("北京", "北京-36")
citySelector.pc[1] = new Array("天津", "天津-40")
citySelector.pc[2] = new Array("河北", "石家庄-73|唐山-74|秦皇岛-75|邯郸-76|邢台-77|保定-78|张家口-79|承德-80|衡水-81|廊坊-82|沧州-83")
citySelector.pc[3] = new Array("山西", "太原-84|大同-85|阳泉-86|长治-87|晋城-88|朔州-89|晋中-90|运城-91|忻州-92|临汾-93|吕梁-94")
citySelector.pc[4] = new Array("内蒙古", "呼和浩特-95|包头-96|乌海-97|赤峰-98|通辽-99|鄂尔多斯-100|呼伦贝尔-101|巴彦淖尔-102|乌兰察布-103|兴安盟-104|锡林郭勒-105|阿拉善盟-106")
citySelector.pc[5] = new Array("辽宁", "沈阳-107|大连-108|鞍山-109|抚顺-110|本溪-111|丹东-112|锦州-113|营口-114|阜新-115|辽阳-116|盘锦-117|铁岭-118|朝阳-119|葫芦岛-120")
citySelector.pc[6] = new Array("吉林", "长春-121|吉林-122|四平-123|辽源-124|通化-125|白山-126|松原-127|白城-128|延边-129")
citySelector.pc[7] = new Array("黑龙江", "哈尔滨-130|齐齐哈尔-131|鸡西-132|鹤岗-133|双鸭山-134|大庆-135|伊春-136|佳木斯-137|七台河-138|牡丹江-139|黑河-140|绥化-141|大兴安岭-142")
citySelector.pc[8] = new Array("上海", "上海-39")
citySelector.pc[9] = new Array("江苏", "南京-162|无锡-163|徐州-164|常州-165|苏州-166|南通-167|连云港-168|淮安-169|盐城-170|扬州-171|镇江-172|泰州-173|宿迁-174")
citySelector.pc[10] = new Array("浙江", "杭州-175|宁波-176|温州-177|嘉兴-178|湖州-179|绍兴-180|舟山-181|衢州-182|金华-183|台州-184|丽水-185")
citySelector.pc[11] = new Array("安徽", "合肥-186|芜湖-187|蚌埠-188|淮南-189|马鞍山-190|淮北-191|铜陵-192|安庆-193|黄山-194|滁州-195|阜阳-196|宿州-197|巢湖-198|六安-199|亳州-200|池州-201|宣城-202")
citySelector.pc[12] = new Array("福建", "福州-203|厦门-204|莆田-205|三明-206|泉州-207|漳州-208|南平-209|龙岩-210|宁德-211")
citySelector.pc[13] = new Array("江西", "南昌-212|景德镇-213|萍乡-214|九江-215|新余-216|鹰潭-217|赣州-218|吉安-219|宜春-220|抚州-221|上饶-222")
citySelector.pc[14] = new Array("山东", "济南-223|青岛-224|淄博-225|枣庄-226|东营-227|烟台-228|潍坊-229|济宁-230|泰安-231|威海-232|日照-233|莱芜-234|临沂-235|德州-236|聊城-237|滨州-238|菏泽-239")
citySelector.pc[15] = new Array("河南", "郑州-240|开封-241|洛阳-242|平顶山-243|安阳-244|鹤壁-245|新乡-246|焦作-247|濮阳-248|许昌-249|漯河-250|三门峡-251|南阳-252|商丘-253|信阳-254|周口-255|驻马店-256|济源-257")
citySelector.pc[16] = new Array("湖北", "武汉-258|黄石-259|十堰-260|宜昌-261|襄阳-262|鄂州-263|荆门-264|孝感-265|荆州-266|黄冈-267|咸宁-268|随州-269|恩施-270|仙桃-271|潜江-272|天门-273|神农架-274")
citySelector.pc[17] = new Array("湖南", "长沙-275|株洲-276|湘潭-277|衡阳-278|邵阳-279|岳阳-280|常德-281|张家界-282|益阳-283|郴州-284|永州-285|怀化-286|娄底-287|湘西-288")
citySelector.pc[18] = new Array("广东", "广州-289|韶关-290|深圳-291|珠海-292|汕头-293|佛山-294|江门-295|湛江-296|茂名-297|肇庆-298|惠州-299|梅州-300|汕尾-301|河源-302|阳江-303|清远-304|东莞-305|中山-306|潮州-307|揭阳-308|云浮-309")
citySelector.pc[19] = new Array("广西", "南宁-310|柳州-311|桂林-312|梧州-313|北海-314|防城港-315|钦州-316|贵港-317|玉林-318|百色-319|贺州-320|河池-321|来宾-322|崇左-323")
citySelector.pc[20] = new Array("海南", "海口-324|三亚-325|五指山-326|琼海-327|儋州-328|文昌-329|万宁-330|东方-331|定安-332|屯昌-333|澄迈-334|临高-335|白沙-336|昌江-337|乐东-338|陵水-339|保亭-340|琼中-341|西沙群岛-342|南沙群岛-343|中沙群岛-344")
citySelector.pc[21] = new Array("重庆", "重庆-62")
citySelector.pc[22] = new Array("四川", "成都-385|自贡-386|攀枝花-387|泸州-388|德阳-389|绵阳-390|广元-391|遂宁-392|内江-393|乐山-394|南充-395|眉山-396|宜宾-397|广安-398|达州-399|雅安-400|巴中-401|资阳-402|阿坝-403|甘孜-404|凉山-405")
citySelector.pc[23] = new Array("贵州", "贵阳-406|六盘水-407|遵义-408|安顺-409|铜仁-410|黔西南-411|毕节-412|黔东南-413|黔南-414")
citySelector.pc[24] = new Array("云南", "昆明-415|曲靖-416|玉溪-417|保山-418|昭通-419|丽江-420|思茅-421|临沧-422|楚雄-423|红河-424|文山-425|西双版纳-426|大理-427|德宏-428|怒江-429|迪庆-430")
citySelector.pc[25] = new Array("西藏", "拉萨-431|昌都-432|山南-433|日喀则-434|那曲-435|阿里-436|林芝-437")
citySelector.pc[26] = new Array("陕西", "西安-438|铜川-439|宝鸡-440|咸阳-441|渭南-442|延安-443|汉中-444|榆林-445|安康-446|商洛-447")
citySelector.pc[27] = new Array("甘肃", "兰州-448|嘉峪关-449|金昌-450|白银-451|天水-452|武威-453|张掖-454|平凉-455|酒泉-456|庆阳-457|定西-458|陇南-459|临夏-460|甘南-461")
citySelector.pc[28] = new Array("青海", "西宁-462|海东-463|海北-464|黄南-465|海南-466|果洛-467|玉树-468|海西-469")
citySelector.pc[29] = new Array("宁夏", "银川-470|石嘴山-471|吴忠-472|固原-473|中卫-474")
citySelector.pc[30] = new Array("新疆", "乌鲁木齐-475|克拉玛依-476|吐鲁番-477|哈密-478|昌吉-479|博尔塔拉-480|巴音郭楞-481|阿克苏-482|克孜勒苏-483|喀什-484|和田-485|伊犁-486|塔城-487|阿勒泰-488|石河子-489|阿拉尔-490|图木舒克-491|五家渠-492")


citySelector.hotCity = ["北京-36", "上海-39", "南京-162", "苏州-166"];

citySelector.hotCityhtmls = "";
citySelector.provHtmls = "";
for (var j = 0; j < citySelector.pc.length; j++) {
    citySelector.provHtmls += "<li data-xuhao='" + j + "'><span class='provinceName'>" + citySelector.pc[j][0] + "</span></li>";
}
for (var i = 0; i < citySelector.hotCity.length; i++) {
    citySelector.hotCityhtmls += "<li id='" + citySelector.hotCity[i].split("-")[1] + "' class='js_cityName'>" + citySelector.hotCity[i].split("-")[0] + "</li>";
}

citySelector.template = '<div class="city-box" id="js_cityBox"><div class="prov-city" id="js_provCity"><p>热门城市</p><ul>' + citySelector.hotCityhtmls + '</ul></div><div class="provence"><div>选择省份</div><div><ul id="js_provList">' + citySelector.provHtmls + '</ul></div></div></div>';

citySelector.cityInit = function (input) {

    $("#" + input).click(function () {

        $("#js_cityBox").remove();
        $("body").append(citySelector.template);

        var _top = $(this).offset().top + 40,
            _left = $(this).offset().left,
            _width = $(window).width();
        if (_width - _left < 450) {
            $("#js_cityBox").css({ "top": _top + "px", "right": "0px" }).addClass("rightSelector");
        }
        else {
            $("#js_cityBox").css({ "top": _top + "px", "left": _left + "px" });
        }

        var label = "false";
        $("#js_provList").on("click", ".provinceName", function () {
            function createUl(_this){
                _this.css({ "background": "#fff", "border-color": "#d8d8d8", "border-bottom-color": "#fff", "position": "absolute", "top": "0", "left": "0", "z-index": "999999" });
                var xuhao = _this.parent("li").attr("data-xuhao"),
                    cityArr = citySelector.pc[xuhao][1].split("|"),
                    cityHtmls = "<ul id='js_provCitys'>";
                for (var i = 0; i < cityArr.length; i++) {
                    cityHtmls += "<li id='" + cityArr[i].split("-")[1] + "' class='js_cityName'>" + cityArr[i].split("-")[0] + "</li>";
                }
                cityHtmls += "</ul>";
                $("#js_provCitys").remove();
                _this.parent("li").append(cityHtmls);
            }

            if (label == "false") {
                label = "true";
                $(this).attr("now-item", "true");
                createUl($(this));
            }
            else {
                if ($(this).attr("now-item") == "" || $(this).attr("now-item") == "false" || $(this).attr("now-item") == undefined) {
                    $(this).parents("#js_provList").find("span").attr("now-item", "false");
                    $(this).attr("now-item", "true");
                    $("#js_provList span").css({ "background": "", "border-color": "", "border-bottom-color": "", "position": "", "top": "", "left": "", "z-index": "" });
                    $("#js_provCitys").remove();
                    createUl($(this));
                }
                else {
                    label = "false";
                    $(this).css({ "background": "", "border-color": "", "border-bottom-color": "", "position": "", "top": "", "left": "", "z-index": "" });
                    $("#js_provCitys").remove();
                }
            }

        });
 

        $(document).mouseup(function(e){
            var containers = $('#js_cityBox, #js_cityName');
            containers.each(function(){
                if($(this).has(e.target).length === 0){
                    e.stopPropagation();
                    $("#js_cityBox").remove();
                }
            });
          
        })

        var _input = input;
        $("#js_cityBox").on("click", ".js_cityName", function (e) {
            e.stopPropagation();
            $("#" + _input).val($(this).html()  );
            $("#cityid").val($(this).attr("id"));
           // alert($(this).attr("id"));
            $("#js_cityBox").remove();
        });
    });
}